// This file was generated by proto-gen. Do not edit by hand.
syntax = "proto3";

package github.semantic;

import "types.proto";

option java_package = "com.github.semantic.analysis";
option go_package = "github.com/semantic/analysis/;analysis";

// Semantic's CodeAnalysis service provides endpoints for parsing, analyzing, and comparing source code.

service CodeAnalysis {
  // Check health & status of the service.
  rpc Ping (PingRequest) returns (PingResponse);
  // Calculate c-tags like symbols for blobs.
  rpc ParseTreeSymbols (ParseTreeRequest) returns (ParseTreeSymbolResponse);
  // Calculate table of contents style diff summaries.
  rpc DiffTreeTOC (DiffTreeRequest) returns (DiffTreeTOCResponse);
}

message PingRequest {
  string service = 1;
}

message PingResponse {
  string status = 1;
  string hostname = 2;
  string timestamp = 3;
  string sha = 4;
}

message ParseTreeRequest {
  repeated Blob blobs = 1;
}

message ParseTreeSymbolResponse {
  repeated File files = 1;
}

message DiffTreeRequest {
  repeated BlobPair blobs = 1;
}

message DiffTreeTOCResponse {
  repeated TOCSummaryChange changes = 1;
  repeated TOCSummaryError errors = 2;
}

message TOCSummaryChange {
  string category = 1;
  string term = 2;
  Span span = 3;
  string changeType = 4;
}

message TOCSummaryError {
  string error = 1;
  Span span = 2;
}
